<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpreadShield by WideSpread</title>
    <link rel="icon" type="image/png" href="./public/media/images/windshield-icon/logo_2a1a1a.png">

    <link rel="stylesheet" href="https://use.typekit.net/eny2fmh.css">
    <link rel="stylesheet" href="./public/style/oe.css">
    <link rel="stylesheet" href="./public/style/spreadshield.css">
    <script src="./public/logic/main.js" defer></script>
    <script src="./public/logic/icons.js"></script>
    <link rel="stylesheet" href="./public/style/spreadshield.css">
    <script src="./public/logic/spreadshield.js" defer></script>

    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>


    <script src="https://unpkg.com/aframe-layout-component@5.3.0/dist/aframe-layout-component.min.js"></script>

    <style>
        #spreadshieldCorePrimaryMenu::before {
                box-shadow: 0 0 30px lightskyblue, inset 0 -20px 22px 6px #000000a6;
                animation: none;
                backdrop-filter: blur(4px);
                opacity: 1;
                background-color: #00000052;
            }
            #spreadshieldCoreSecondaryMenu::before {
                box-shadow: 0 0 30px lightskyblue, inset 0 -20px 22px 6px #000000a6;
                animation: none;
                backdrop-filter: blur(4px);
                opacity: 1;
                background-color: #00000052;
        }
    </style>
</head>
<body>

    <!-- VR Container -->
     <div id="vrContainer">
        <a-scene renderer="antialias: true;
                   colorManagement: true;
                   sortObjects: true;
                   physicallyCorrectLights: true;"
                   xr-mode-ui="false"
                   fog="type: exponential; color: #111; density: 0.05; near: 0; far: 1000;">
            <a-assets>
                <!-- <a-asset-item id="" src="./public/media/models"></a-asset-item> -->
                <a-asset-item id="lambo1" src="./public/media/models/vehicle/lamborgini_revuelto_1a1a1a.glb"></a-asset-item>
                <a-asset-item id="lambo2" src="./public/media/models/vehicle/lambo_1a1a2a.glb"></a-asset-item>
                <a-asset-item id="vrBackdrop" src="./public/media/models/backdrop/studio_v1_for_car_2k.glb"></a-asset-item>
                <a-asset-item id="spreadMenu" src="./public/media/models/system/WS_logo_1a2a3a.glb"></a-asset-item>
                <a-asset-item id="spreadTitle" src="./public/media/models/system/WS_3d_main-header_1a1a1a.glb"></a-asset-item>
                <!-- <a-asset-item id="warehouse" src="./public/media/models/backdrop/warehouse_8k.glb"></a-asset-item> -->
                <a-asset-item id="jonnyo" src="./public/media/models/character/jonny-o_1a1a3a_glb.glb"></a-asset-item>
                <audio id="song" src="./public/media/audio/lightitup.wav" loop></audio>
                <img id="universe" src="./public/media/images/360/universe.jpg" alt="">
            </a-assets>



            <a-entity id="lambo1El" position="0 0 -20" rotation="0 90 0" scale="1 1 1" animation="property: position; from: 0 0 -20; to: 0 0 -4; dur: 8000; easing: easeInCubic; delay: 2000; loop: false;">
                <a-light type="spot" id="lamboLightSpot" light="color: #00fffb; intensity: 0.3; type: spot; castShadow: true" position="0 2 0" animation="property: light.intensity; from: 0.3; to: 1.0; dur: 5000; dir: alternate; easing: easeInOutElastic; elasticity: 1200; loop: true;"></a-light>
                <a-light type="point" id="lamboLightPoint" light="color: #00fffb; intensity: 0.1; type: point; castShadow: true" position="0 2 0" animation="property: light.intensity; from: 0.1; to: 0.8; dur: 5000; dir: alternate; easing: easeInOutElastic; elasticity: 1200; loop: true;"></a-light>
                <a-gltf-model src="#lambo1" position="0 0 0" scale="1 1 1" material=""></a-gltf-model>
            </a-entity>
            <a-entity id="lambo2El" position="0 0 20" rotation="0 180 0" scale="1 1 1" animation="property: position; from: 0 0 20; to: 0 0 4; dur: 8000; easing: easeInOutCubic; delay: 2000; loop: false;">
                <a-light type="spot" id="lambo2LightSpot" light="color: orange; intensity: 1; type: spot; castShadow: true" position="0 2 0" animation="property: light.intensity; from: 0.3; to: 1.0; dur: 5000; dir: alternate; easing: easeInOutElastic; elasticity: 1200; loop: true;"></a-light>
                <a-light type="point" id="lambo2LightPoint" light="color: lightskyblue  ; intensity: 0.5; type: point; castShadow: true" position="0 2 0" animation="property: light.intensity; from: 0.1; to: 0.8; dur: 5000; dir: alternate; easing: easeInOutElastic; elasticity: 1200; loop: true;"></a-light>
                <a-gltf-model src="#lambo2" position="0 0 0" scale="1 1 1" material="alphaTest: 1;"></a-gltf-model>
            </a-entity>
            <a-entity id="jonnyoEl" position="-2.16612 0 -2.82773" rotation="0 45 0" scale="">
                <a-light type="point" id="spreadMenuLight" color="lime" light="color: #ffff00; intensity: 1.6; castShadow: true" position="-0.27731 3 0.78351"></a-light>
                <a-box scale="1.96 2.1 0.14" material="color: #000000" position="-0.0475 0 0.209"></a-box>
                <a-gltf-model src="#jonnyo" position="" scale="1 1 1" material=""></a-gltf-model>
            </a-entity>
            <!-- <a-entity id="warehouseEl" position="-30 0 -6" rotation="0 180 0" scale="1 1 1">
                <a-light type="point" id="spreadMenuLight" color="lime" light="color: #00fffb; intensity: 1.69; type: point; castShadow: true" position="0 0 1.06082"></a-light>
                <a-gltf-model src="#warehouse" position="0 0 0" scale="1 1 1" material=""></a-gltf-model>
            </a-entity> -->
            <a-entity id="vrBackdropEl" position="0 0 -14" rotation="0 0 0" scale="1 1 1">
                <!-- <a-light type="point" id="spreadMenuLight" color="lime" light="color: #00fffb; intensity: 1.69; type: point; castShadow: true" position="0 0 1.06082"></a-light> -->
                <a-gltf-model src="#vrBackdrop" position="0 0 0" scale="1 1 1" material=""></a-gltf-model>
            </a-entity>
            <a-entity id="vrBackdropEl-2" position="-1 -0.01 16.214" rotation="0 180 0" scale="">
                <a-light type="point" id="spreadVrBackdrop2" color="lime" light="color: yellow; intensity: 1; type: point; castShadow: true" position="0 0 1.06082"></a-light>
                <a-gltf-model src="#vrBackdrop" position="" scale="" material="opacity: 0.46; transparent: true" gltf-model="./public/media/models/backdrop/studio_v1_for_car_2k.glb"></a-gltf-model>
            </a-entity>

            <a-entity id="spreadMenuVr" position="0 -2 0" rotation="0 0 0" scale="1 1 1" animation="property: rotation; from: 0 0 0; to: 0 -90 75; dur: 5000; easing: easeInOutElastic; loop: false">
                <a-light type="point" id="spreadMenuLight" color="lime" light="color: #00fffb; intensity: 0.69; type: point; castShadow: true" position="0 0 1.06082"></a-light>
                <a-gltf-model src="#spreadMenu" position="0 0 0" scale="0.5 0.5 0.5" material="metalness: 1; transparent: true; opacity: 0.5;"></a-gltf-model>
                <a-entity id="mainHoverAction" geomtry="primitive: sphere; radius: 0.5;" material="color: #00fffb"
                    position="-0.02673 0.57022 -0.00222" geometry="primitive: sphere; radius: 0.12">

                </a-entity>

                <a-entity id="subSpreadMenu1Vr" geometry="primitive: torus; radius: 0.68; radiusTubular: 0.06; segmentsRadial: 37" color="red" radius="3"
                    rotation="0 90 0" position="-0.01505 0.55618 -0.00593"
                    material="alphaTest: 0.22; opacity: 0; transparent: true; fog: false; height: 50; metalness: 0.81; roughness: 0.75"></a-entity>
            </a-entity>

            <a-entity id="spreadTitleVr" position="0 1.5 -2" rotation="0 0 0" scale="1 1 1">
                <!-- <a-light type="point" id="spreadMenuLight" color="lime" light="color: #fff; intensity: 1.69; type: point; castShadow: true" position="0 2 0"></a-light> -->
                <a-gltf-model src="#spreadTitle" position="0 0 0" scale="1 1 1" material="metalness: 1; transparent: true; opacity: 0.5;" shadows="cast: true; recieve: true;"></a-gltf-model>
            </a-entity>


            <a-sky src="#universe" meterial="opacity: 1"></a-sky>

            <a-entity id="rig" camera look-controls wasd-controls="acceleration: 2;" rotation-reader position="0 1.6 0">
                <a-light></a-light>
                <a-entity
                    cursor="fuse: true; fuseTimeout: 500"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: aqua; shader: flat"
                    raycaster="far: 20; interval: 1000; objects: .clickable"
                >

                </a-entity>
            </a-entity>
        </a-scene>
     </div>



     <!-- WideSpread Logo -->
      <div id="backgroundAudio">
        <!-- <audio id="backgroundAudioPlayer" src="./public/media/audio/city-night-square_1a1a1a.mp3"></audio> -->
      </div>

    <div id="vrCurtain">
        <div class="vr-curtain-data">
            <p style="font-family: 'Abnes'">Tap anywhere to enter WideSpreads Digital Reality</p>
        </div>
    </div>


      <div id="wsLogoCover"></div>
      <div id="wsLogo">
         <img draggable="false" src="./public/media/images/windshield-icon/logo_2a1a1a.png" alt="WideSpread Logo">
      </div>




        <!-- This is the windshields lower and primary main menu (always fixed to the bottom of the windshield & touchscreen) -->
        <div id="spreadshieldCorePrimaryMenu">
            <!-- <span>Primary Menu</span> -->

        </div>

        <!-- This is the windshields upper and secondary main menu (always fixed to the top of the windshield & touchscreen, replacing the rear-view mirrors real estate) -->
        <div id="spreadshieldCoreSecondaryMenu">
            <!-- <span>Secondary Menu</span> -->
        </div>
    <div id="spreadShieldContainer" style="user-select: none; pointer-events: none;">


        <!-- This is where we bring in all of the windshield UI elements -->
        <div id="spreadshieldAppContainer">
            <span>App 1</span>
            <span>App 2</span>
            <span>App 3</span>
            <span>App 4</span>
            <span>App 5</span>
        </div>

    </div>

    <!-- Current Pointer Location -->
     <div id="pointerLocation" data-color="rgba(0, 255, 255, 0.5)">
        <div id="pointerLocationDot">
        </div>
        <!-- <div class="trail">
            <div class="pointer"></div>
            <div class="pointer2"></div>
            <div class="pointer3"></div>
            <div class="pointer4"></div>
            <div class="pointer5"></div>
        </div> -->
     </div>


    <div id="fullscreenToggle">
        <img id="fullscreenBtn" src="./public/media/images/system/view-expand.png" alt="Fullscreen Icon">
        <img id="exitFullscreenBtn" class="hidden" src="./public/media/images/system/view-collapse.png"
            alt="Exit Fullscreen Icon">
    </div>

    <script>
        const
            fullscreenToggle = document.getElementById('fullscreenToggle'),
            fullscreenBtn = document.getElementById('fullscreenBtn'),
            exitFullscreenBtn = document.getElementById('exitFullscreenBtn')

        fullscreenBtn.addEventListener('click', e => {
            document.documentElement.requestFullscreen().catch((e) => {
                console.log(e)
            })
            fullscreenBtn.classList.toggle('hidden')
            exitFullscreenBtn.classList.toggle('hidden')
        })
        exitFullscreenBtn.addEventListener('click', e => {
            document.exitFullscreen()
            fullscreenBtn.classList.toggle('hidden')
            exitFullscreenBtn.classList.toggle('hidden')
        })
    </script>


    <script>
        const
            backgroundAudioPlayer = document.getElementById('backgroundAudioPlayer'),
            vrCurtain = document.getElementById('vrCurtain'),
            wsLogo = document.getElementById('wsLogo'),
            wsLogoCover = document.getElementById('wsLogoCover')

        document.addEventListener('click', e => {
            console.log('click')
            console.log(backgroundAudioPlayer)
            // backgroundAudioPlayer.play()
            wsLogo.style.opacity = 0
            vrCurtain.style.opacity = 0
            if (backgroundAudioPlayer.paused = false) {
                console.log('paused')
            }
        })
    </script>


    <script>
        const
            scenic = document.querySelector('a-scene'),
            spreadMenuVr = document.getElementById('spreadMenuVr')

        scenic.addEventListener('click', e => {

            const
                rig = scenic.querySelector('#rig'),
                camPos = scenic.camera.el.object3D.position;
                camRotate = scenic.camera.el.object3D.rotation;

            console.log(rig)
            const camLoc = {
                x: camPos.x,
                y: camPos.y,
                z: camPos.z
            }
            const camRot = {
                x: camRotate.x,
                y: camRotate.y,
                z: camRotate.z
            }
            console.log(`camRot x: ${camRot.x}`)
            console.log(`camRot y: ${camRot.y}`)
            console.log(`camRot z: ${camRot.z}`)

            spreadMenuVr.setAttribute('position', { x: camLoc.x, y: 0, z: camLoc.z });
            spreadMenuVr.setAttribute('rotation', { x: 0, y: ((camRot.y * 57.29578) + -90), z: 75});
        })
    </script>


    <script>
        const 
            mainHoverAction = document.getElementById('mainHoverAction'),
            subSpreadMenu1Vr = document.getElementById('subSpreadMenu1Vr')


        AFRAME.registerComponent('rotation-reader', {
            tick: function () {
                // `this.el` is the element.
                // `object3D` is the three.js object.

                // `rotation` is a three.js Euler using radians. `quaternion` also available.
                console.log('this.el.object3D.rotation');
                console.log(this.el.object3D.rotation.y);

                // `position` is a three.js Vector3.
                console.log(this.el.object3D.position);
            }
        });



    </script>
</body>
</html>